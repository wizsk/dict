<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="/pub/amiri.css" rel="stylesheet"> -->
    <link rel="shortcut icon" href="/pub/fav.png" type="image/x-icon">
    <title>{{if not .Word}}Arabic Dictionary{{else}}Searched: {{.Word}}{{end}}</title>

    <style>
        @font-face {
            font-family: "Amiri";
            src: url("/pub/Amiri-Regular.ttf") format("truetype");
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: inter;
            font-size: 1.2rem;
            font-family: sarif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .px {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        form {
            margin-top: 2rem;
        }

        #w {
            font-family: "Amiri";
            direction: rtl;
            text-align: right;
            font-size: inherit;
            max-width: 60vw;
            padding-top: .5rem;
            padding-bottom: .5rem;
        }

        button {
            font-family: "Amiri";
            padding-top: .5rem;
            padding-bottom: .5rem;
        }

        main {
            font-family: "Amiri";
            margin-top: 1rem;
        }

        /* Styles for medium-sized screens */
        @media (min-width: 768px) {
            body {
                font-size: 1.6rem;
            }
        }
    </style>

</head>

<body>
    <form autocomplete="off" action="/" method="get">
        <button type="submit" style="font-size: inherit;">Search</button>
        <input value="{{.Word}}" name="w" id="w" type="text" placeholder="ابحث" {{if not .Word}}autofocus{{end}}>
    </form>

    <main>
        {{if .Entries}}
        <table>
            <thead>
                <td class="px">Def</td>
                <td class="px">Word</td>
                <!-- <td class="px">Root</td> -->
            </thead>
            {{range .Entries}}
            <tr>
                <td class="px">{{.Word}}</td>
                <td class="px">{{.Def}}</td>
                <!-- <td class="px">{{.Root}}</td> -->
            </tr>
            {{end}}
        </table>
        {{else if .Word}}
        No resusts for: "{{.Word}}"
        {{else}}
        Search for something
        {{end}}
    </main>

    <script>
        // ----------- keyboard shoutcuts ----------
        document.addEventListener('keydown', (e) => {
            const input = w;
            if (document.activeElement === input) {
                if (e.code === "Escape") input.blur();
                return;
            }


            // no composite key
            if (/*e.shiftKey ||*/ e.ctrlKey) {
                return;
            }

            switch (e.code) {
                case "KeyS":
                    e.preventDefault();
                    input.focus();
                    input.setSelectionRange(input.value.length, input.value.length);
                    break;
                case "KeyI":
                    e.preventDefault();
                    input.focus();
                    input.select();
                    break;

            }
        })
    </script>
</body>

</html>
